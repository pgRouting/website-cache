<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

  
  

  


  

  
<!-- Mirrored from pgrouting.postlbs.org/discussion/topic/359 by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 20 Nov 2010 01:59:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Message List – pgRouting
    </title>
        <link rel="search" href="../../search.html" />
        <link rel="help" href="../../wiki/TracGuide.html" />
        <link rel="start" href="../../wiki.html" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/discussion/css/discussion.css" type="text/css" /><link rel="stylesheet" href="../../chrome/discussion/css/admin.css" type="text/css" />
        <link rel="shortcut icon" href="../../chrome/site/pgRouting.ico" type="image/x-icon" />
        <link rel="icon" href="../../chrome/site/pgRouting.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../search/opensearchhtml.html" title="Search pgRouting" />
    <script type="text/javascript" src="../../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../chrome/common/js/search.js"></script><script type="text/javascript" src="../../chrome/common/js/wikitoolbar.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      $(document).ready(function() {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../../chrome/site/css/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../index.html"><img src="../../chrome/site/slonik2_11.gif" alt="" height="126" /></a>
      </div>
      <form id="search" action="http://pgrouting.postlbs.org/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../login.html">Login</a></li><li><a href="../../prefs.html">Preferences</a></li><li class="last"><a href="../../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../../wiki.html">Home</a></li><li><a href="../../timeline.html">Timeline</a></li><li><a href="../../roadmap.html">Roadmap</a></li><li><a href="../../browser.html">Browse Source</a></li><li><a href="../../report.html">View Tickets</a></li><li><a href="../../search.html">Search</a></li><li class="last active"><a href="../../discussion.html">Forum</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../../discussion.html">Forum Index</a></li><li class="last"><a href="../forum/16.html" title="dijkstra">dijkstra</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="discussion searchable">
      <div id="message-list" class="message-list">
        <h1>dijkstra (#16) -  (#359) - Message List</h1>
      <div class="topic new">
        <a name="topic"></a>
        <div class="header">
            <div class="subject">
               
            </div>
            <div class="body">
              <p>
Hi every one,
</p>
<p>
im doing a routing in roads, im using the nex sql:
</p>
<p>
SELECT asText(the_geom) as geom FROM dijkstra_sp('highway', 13747,13738);
</p>
<p>
for vertexs 13747 to 13738 it work fine but has more than one line that it dont be appear i put a img to see this.
</p>
<p>
<a style="padding:0; border:none" href="http://204.232.135.228/ar/routing.jpg"><img src="http://204.232.135.228/ar/routing.jpg" alt="http://204.232.135.228/ar/routing.jpg" title="http://204.232.135.228/ar/routing.jpg" /></a>
</p>
<p>
please teach me how to remove that line or what sql function must be i use to do this fine.
</p>
<p>
thaks.
</p>
            </div>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            jorgeliecer.osorio
          </div>
          <div class="time">
            04/30/10 02:39:34 (7 months ago)
          </div>
        </div>
      </div>
      <div class="replies new">
    <div class="set-display">
      Tree View
      <a href="http://pgrouting.postlbs.org/discussion/topic/359?discussion_action=set-display;display=flat-desc#topic">Flat View (newer first)</a>
      <a href="http://pgrouting.postlbs.org/discussion/topic/359?discussion_action=set-display;display=flat-asc#topic">Flat View (older first)</a>
    </div>
        <ul class="reply">
    <li class="new">
        <a name="message1493"></a>
        <div class="id">
          Message #1493
        </div>
        <div class="body">
            <p>
Its other example, the correct routing must be the red, and the query make the black lines.
</p>
<p>
what is wrong?
</p>
<p>
<a style="padding:0; border:none" href="http://204.232.135.228/ar/routing2.jpg"><img src="http://204.232.135.228/ar/routing2.jpg" alt="http://204.232.135.228/ar/routing2.jpg" title="http://204.232.135.228/ar/routing2.jpg" /></a>
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            jorgeliecer.osorio
          </div>
          <div class="time">
            04/30/10 03:22:27 (7 months ago)
          </div>
        </div>
      <ul class="reply">
    <li class="new">
        <a name="message1494"></a>
        <div class="id">
          Message #1494
        </div>
        <div class="body">
            <p>
The second example indeed looks very strange, but pgRouting usually only takes the network it has available. So I assume your network topology is wrong.
</p>
<p>
You see there are a lot of roads close to each other, so I assume that your "snapping" tolerance when running the assign_vertex_id was too big and nearby vertexes were merged to one point.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            04/30/10 09:55:43 (7 months ago)
          </div>
        </div>
      <ul class="reply">
    <li class="new">
        <a name="message1495"></a>
        <div class="id">
          Message #1495
        </div>
        <div class="body">
            <p>
Daniel,
</p>
<p>
thanks the code that im using is this:
</p>
<p>
SELECT assign_vertex_id('highway', 0.001, 'the_geom', 'gid');
UPDATE victoria SET length = length(the_geom);
</p>
<p>
i need to be more things to calculate the edges? im using part of OSM ERSI files to build the network topology maybe a missing one step or what i need to do in order to complete the structure.
</p>
<p>
thanks a lot.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            jorgeliecer.osorio
          </div>
          <div class="time">
            05/01/10 05:23:56 (7 months ago)
          </div>
        </div>
      <ul class="reply">
    <li class="new">
        <a name="message1496"></a>
        <div class="id">
          Message #1496
        </div>
        <div class="body">
            <p>
I assume your geometry is a projection in degree units. In this case all vertexes closer than 0.001 degree will snap to one. If your data is good quality you can make this value even smaller. Try it once with 0.00001 for example and see if the result looks different.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            05/01/10 09:22:57 (7 months ago)
          </div>
        </div>
      <ul class="reply">
    <li class="new">
        <a name="message1497"></a>
        <div class="id">
          Message #1497
        </div>
        <div class="body">
            <p>
Daniel, im using degree units, and 0.00001 generate more edges but in some cases the edges dont return data but when it return the problem continue but less than after. when you said ÿour data is good quality" what do you mean? how do i build my road network in order to my short path work?
</p>
<p>
please help me.
</p>
<p>
thanks.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            jorgeliecer.osorio
          </div>
          <div class="time">
            05/02/10 01:33:21 (7 months ago)
          </div>
        </div>
      <ul class="reply">
    <li class="new">
        <a name="message1498"></a>
        <div class="id">
          Message #1498
        </div>
        <div class="body">
            <p>
You use OSM data, don't you? Some OSM mapper don't care much about a valid network when the add roads. Roads are not connected where they should be, but on the rendered map it looks OK. <br />
For that you can use this snapping tolerance. For example you would have a projection in meter you could set the the tolerance to 1(m) to connect road links that should be connected. Of course it can happen then that you connect roads that shouldn't be connected. But you won't be able to make defective data much better than it is.<br />
If you for example use Navteq data you should be able to assume that they care about a correct network topology.
</p>
<p>
In your case it seems that the OSM road data is not so good, so you need to find a good value for the snapping tolerance.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            05/02/10 05:50:14 (7 months ago)
          </div>
        </div>
      <ul class="reply">
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
          <li></li>
        </ul>
    <div class="set-display">
      Tree View
      <a href="http://pgrouting.postlbs.org/discussion/topic/359?discussion_action=set-display;display=flat-desc#topic">Flat View (newer first)</a>
      <a href="http://pgrouting.postlbs.org/discussion/topic/359?discussion_action=set-display;display=flat-asc#topic">Flat View (older first)</a>
    </div>
        
        <div class="attachments">
        </div>
      </div>
      </div>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../about.html"><strong>Trac 0.11.5rc1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">pgRouting is a project of PostLBS <br /><a href="http://www.postlbs.org/">http://www.postlbs.org/</a></p>
    </div>
  </body>
