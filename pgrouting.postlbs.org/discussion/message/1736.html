<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

  
  

  


  

  
<!-- Mirrored from pgrouting.postlbs.org/discussion/message/1736 by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 20 Nov 2010 01:57:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Message List – pgRouting
    </title>
        <link rel="search" href="../../search.html" />
        <link rel="help" href="../../wiki/TracGuide.html" />
        <link rel="start" href="../../wiki.html" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/discussion/css/discussion.css" type="text/css" /><link rel="stylesheet" href="../../chrome/discussion/css/admin.css" type="text/css" />
        <link rel="shortcut icon" href="../../chrome/site/pgRouting.ico" type="image/x-icon" />
        <link rel="icon" href="../../chrome/site/pgRouting.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../search/opensearchhtml.html" title="Search pgRouting" />
    <script type="text/javascript" src="../../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../chrome/common/js/search.js"></script><script type="text/javascript" src="../../chrome/common/js/wikitoolbar.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      $(document).ready(function() {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../../chrome/site/css/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../index.html"><img src="../../chrome/site/slonik2_11.gif" alt="" height="126" /></a>
      </div>
      <form id="search" action="http://pgrouting.postlbs.org/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../login.html">Login</a></li><li><a href="../../prefs.html">Preferences</a></li><li class="last"><a href="../../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../../wiki.html">Home</a></li><li><a href="../../timeline.html">Timeline</a></li><li><a href="../../roadmap.html">Roadmap</a></li><li><a href="../../browser.html">Browse Source</a></li><li><a href="../../report.html">View Tickets</a></li><li><a href="../../search.html">Search</a></li><li class="last active"><a href="../../discussion.html">Forum</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../../discussion.html">Forum Index</a></li><li><a href="../forum/23.html" title="data">data</a></li><li class="last"><a href="../topic/389.html" title="time of finding path">time of finding path</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="discussion searchable">
      <div id="message-list" class="message-list">
        <h1>data (#23) - time of finding path (#389) - Message List</h1>
      <div class="topic ">
        <a name="topic"></a>
        <div class="header">
            <div class="subject">
              time of finding path
            </div>
            <div class="body">
              <p>
We have server Dell <a class="missing wiki">PowerEdge?</a> 1850. We gon geberated base of Europe and Asia help of the tool osm2pgrouting. How much time take finding the path from Madrid to Moscow.
</p>
            </div>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            Arnor
          </div>
          <div class="time">
            10/10/10 19:23:02 (6 weeks ago)
          </div>
        </div>
      </div>
      <div class="replies ">
    <div class="set-display">
      Tree View
      <a href="http://pgrouting.postlbs.org/discussion/topic/389?discussion_action=set-display;display=flat-desc#topic">Flat View (newer first)</a>
      <a href="http://pgrouting.postlbs.org/discussion/topic/389?discussion_action=set-display;display=flat-asc#topic">Flat View (older first)</a>
    </div>
        <ul class="reply">
    <li>
        <a name="message1682"></a>
        <div class="id">
          Message #1682
        </div>
        <div class="body">
            <p>
First, you won't be able to use osm2pgrouting to import a very large area with lots of roads as yours will probably be.
</p>
<p>
Second, it might take minutes to get a route from Madrid to Moscow, if you don't use a clever strategy how to load your data, and if your data is large. Such a strategy (like layering) depends very much on your use case.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            10/10/10 22:18:27 (6 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1736"></a>
        <div class="id">
          Message #1736
        </div>
        <div class="body">
            <p>
I have the same problem, I think, and also try to solve it.
It seems like there is bottleneck in selection from ways table. I reduced total amount of ways in Europe and Russia to 4.2m using only ways of needed classes.
Also I select only ways from area between points
</p>
<pre class="wiki">
$delta = 1;
$minLon = min($cityFrom['longitude'], $cityTo['longitude']);
$maxLon = max($cityFrom['longitude'], $cityTo['longitude']);
$minLat = min($cityFrom['latitude'], $cityTo['latitude']);
$maxLat = max($cityFrom['latitude'], $cityTo['latitude']);
$res = $conn-&gt;execute("
      SELECT
        *
      FROM
        shortest_path(
          'SELECT
            gid AS id,
            source::int4,
            target::int4,
            length::double precision AS cost
          FROM
            ways
          WHERE
              x1 &gt; ".($minLon - $delta)." AND x1 &lt; ".($maxLon + $delta)."
              AND
              x2 &gt; ".($minLon - $delta)." AND x2 &lt; ".($maxLon + $delta)."
              AND
              y1 &gt; ".($minLat - $delta)." AND y1 &lt; ".($maxLat + $delta)."
              AND
              y2 &gt; ".($minLat - $delta)." AND y2 &lt; ".($maxLat + $delta)."
          ',
          ?,
          ?,
          false,
          false
      ), array(
        $cityFrom['edge']['source'],
        $cityTo['edge']['target'],
));
</pre><p>
But it seems still not enough to find path between e.g. Moscow and Madrid in sufficient time, it takes now about minute. "SELECT .. FROM <tt>ways</tt>"  still selects 2.4m of rows and takes all RAM that way.
</p>
<p>
Maybe it is more related to PostgreSQL optimization than <a class="missing wiki">PgRouting?</a>, but are there ways to improve speed?
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            roadhump
          </div>
          <div class="time">
            11/01/10 23:55:56 (3 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1742"></a>
        <div class="id">
          Message #1742
        </div>
        <div class="body">
            <p>
Well, it usually only depends on how much data you load. You should make sure the following points
</p>
<ul><li>Do you have indices?
</li><li>Do you select only the data you need (take a bounding box for example, that contains all relevant data)
</li><li>Check if you have very high ID's. It's better to renumber ID's in that case.
</li></ul>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            11/02/10 22:15:42 (3 weeks ago)
          </div>
        </div>
      <ul class="reply">
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li><li>
        <a name="message1684"></a>
        <div class="id">
          Message #1684
        </div>
        <div class="body">
            <p>
Thank you. What do you mean by clever strategy load data? Site <a class="ext-link" href="http://maps.map.cloudmade.com/"><span class="icon"> </span>http://maps.map.cloudmade.com</a> search path takes a few seconds. How is this done?
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            Arnor
          </div>
          <div class="time">
            10/11/10 17:48:08 (6 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1685"></a>
        <div class="id">
          Message #1685
        </div>
        <div class="body">
            <p>
You should ask this question to Cloudmade, why they are so fast ;-)
</p>
<p>
pgRouting is a library for a PostGIS database, so you don't load all your network into RAM in some pre-calculated compressed format. That's why it won't be possible to achieve the same performance as with those specialized routing services running in memory. On the other hand those are not able to provide the flexibility of pgRouting.
</p>
<p>
Clever strategy would be for example that you make layers by road classes and take only layers with more important roads for long distance routing, and you only load the whole road network around start and end point.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            10/11/10 20:44:53 (6 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1692"></a>
        <div class="id">
          Message #1692
        </div>
        <div class="body">
            <p>
I downloaded the file russian_federation.osm.highway.bz2 (80.5M). With utility osmosis filtered the following types of roads: motorvay - tertiary.
</p>
<p>
./osmosis --read-xml file="$1" --way-key-value keyValueList="highway.motorway,highway.motorway_link,highway.trunk,highway.trunk_link,highway.primary,highway.primary_link,highway.secondary,highway.secondary_link,highway.tertiary " --write-xml file="filter1.osm"
</p>
<p>
To generate the database used osm2pgroting. In the generated database, the number of entries in the table 'ways' decreased by 6 times the number of entries in the table 'nodes' are not changed. How can I reduce the number of 'nodes'?
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            Arnor
          </div>
          <div class="time">
            10/13/10 17:58:19 (5 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1693"></a>
        <div class="id">
          Message #1693
        </div>
        <div class="body">
            <p>
After using osm2pgrouting your table should look similar to this one
</p>
<pre class="wiki">pgrouting-workshop=# \d
                Liste der Relationen
 Schema |        Name         |   Typ   | Eigentümer
--------+---------------------+---------+------------
 public | geography_columns   | Sicht   | postgres
 public | geometry_columns    | Tabelle | postgres
 public | spatial_ref_sys     | Tabelle | postgres
 public | vertices_tmp        | Tabelle | postgres
 public | vertices_tmp_id_seq | Sequenz | postgres
 public | ways                | Tabelle | postgres
(6 Zeilen)
</pre><p>
The table vertices_tmp is what you mean with "nodes table"? It's just used to populate the source/target columns in "ways" table, so you actually don't need it anymore later.
</p>
<p>
Btw., you can specify in the osm2pgrouting configuration file, which ways you want to import. I haven't used osmosis for that, so can't tell much about.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            daniel
          </div>
          <div class="time">
            10/13/10 19:39:37 (5 weeks ago)
          </div>
        </div>
      <ul class="reply">
    <li>
        <a name="message1749"></a>
        <div class="id">
          Message #1749
        </div>
        <div class="body">
            <p>
I want to join PostLBS programming and development. Because fisrt time join in the open source so many things not understood, I hope to receive help from you.
First please, you help me explain the setup manual for window, I do not understand these instructions so I should not be done: <a href="../../wiki/1.x/WindowsInstallationManual.html">http://pgrouting.postlbs.org/wiki/1.x/WindowsInstallationManual</a>
From section: Manual install CMAKE I do not understand the instructions as:
#. / Configure - prefix = E: / Build/msys/1.0/local
# Make
# Make install
is doing?
Also I do not understand the lower part, with section Boost
# Bjam-MinGW Stools = "-static sBUILD = release &lt;runtime-link&gt; &lt;threading&gt; multi &lt;native-wchar_t&gt; on" - prefix = / install e/Build/msys/1.0/local
# Mv / usr/local/include/boost-1_33_1/boost / usr / local / include / boost
# Rmdir / usr/local/include/boost-1_33_1
these sections aother too, hope to receive your help.
my english is very bad, you try to understand and help me.
thanks.
</p>
        </div>
        <div class="controls">
        </div>
        <div class="footer">
          <div class="author">
            namdt40
          </div>
          <div class="time">
            11/09/10 13:10:55 (11 days ago)
          </div>
        </div>
      <ul class="reply">
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
        <li></li>
      </ul>
    </li>
          <li></li>
        </ul>
    <div class="set-display">
      Tree View
      <a href="http://pgrouting.postlbs.org/discussion/topic/389?discussion_action=set-display;display=flat-desc#topic">Flat View (newer first)</a>
      <a href="http://pgrouting.postlbs.org/discussion/topic/389?discussion_action=set-display;display=flat-asc#topic">Flat View (older first)</a>
    </div>
        
        <div class="attachments">
        </div>
      </div>
      </div>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../about.html"><strong>Trac 0.11.5rc1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">pgRouting is a project of PostLBS <br /><a href="http://www.postlbs.org/">http://www.postlbs.org/</a></p>
    </div>
  </body>
