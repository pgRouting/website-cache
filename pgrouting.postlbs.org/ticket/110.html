<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  
<!-- Mirrored from pgrouting.postlbs.org/ticket/110 by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 20 Nov 2010 02:17:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
          #110 (Dijkstra fails on parrallel edges)
     â€“ pgRouting
    </title>
        <link rel="search" href="../search.html" />
        <link rel="prev" href="100.html" title="Ticket #100" />
        <link rel="last" href="109.html" title="Ticket #109" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="http://pgrouting.postlbs.org/ticket/110?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="http://pgrouting.postlbs.org/ticket/110?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="http://pgrouting.postlbs.org/ticket/110?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="up" href="http://pgrouting.postlbs.org/report/9?USER=anonymous&amp;page=1" />
        <link rel="next" href="114.html" title="Ticket #114" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="138.html" title="Ticket #138" />
        <link rel="shortcut icon" href="../chrome/site/pgRouting.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/site/pgRouting.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearchhtml.html" title="Search pgRouting" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
        $("#changelog h3.change").addAnchor("Link to this change");
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[@id]").enable($(this).checked());
            $(this).siblings().filter("*[@id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/css/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../index.html"><img src="../chrome/site/slonik2_11.gif" alt="" height="126" /></a>
      </div>
      <form id="search" action="http://pgrouting.postlbs.org/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Home</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../browser.html">Browse Source</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../discussion.html">Forum</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="100.html" title="Ticket #100">Previous Ticket</a></span></li><li><a href="http://pgrouting.postlbs.org/report/9?USER=anonymous&amp;page=1">Back to Query</a></li><li class="last"><span><a class="next" href="114.html" title="Ticket #114">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1>
              Ticket #110
          <span class="status">(closed bug report: invalid)</span>
      </h1>
      <!-- Do not show the ticket (pre)view when the user first comes to the "New Ticket" page.
           Wait until they hit preview. -->
        <!-- Ticket Box (ticket fields along with description) -->
        <div id="ticket">
          <div class="date">
            <p>Opened <a class="timeline" href="http://pgrouting.postlbs.org/timeline?from=2008-05-08T21%3A36%3A30%2B0900&amp;precision=second" title="2008-05-08T21:36:30+0900 in Timeline">3 years</a> ago</p>
            <p>Last modified <a class="timeline" href="http://pgrouting.postlbs.org/timeline?from=2008-05-31T02%3A39%3A31%2B0900&amp;precision=second" title="2008-05-31T02:39:31+0900 in Timeline">2 years</a> ago</p>
          </div>
          <!-- use a placeholder if it's a new ticket -->
          <h2 class="summary searchable">Dijkstra fails on parrallel edges</h2>
          <table class="properties">
            <tr>
              <th id="h_reporter">Reported by:</th>
              <td headers="h_reporter" class="searchable">erik_heinz</td>
              <th id="h_owner">Owned by:</th>
              <td headers="h_owner">somebody
              </td>
            </tr>
            <tr>
                <th id="h_priority">
                  Priority:
                </th>
                <td headers="h_priority">
                      major
                </td>
                <th id="h_milestone">
                  Milestone:
                </th>
                <td headers="h_milestone">
                      <a class="missing milestone"></a>
                </td>
            </tr><tr>
                <th id="h_component">
                  Component:
                </th>
                <td headers="h_component">
                      Dijkstra
                </td>
                <th id="h_version">
                  Version:
                </th>
                <td headers="h_version">
                      1.01
                </td>
            </tr><tr>
                <th id="h_keywords">
                  Keywords:
                </th>
                <td headers="h_keywords" class="searchable">
                </td>
                <th id="h_cc">
                  Cc:
                </th>
                <td headers="h_cc" class="searchable">
                </td>
            </tr>
          </table>
            <div class="description">
              <h3 id="comment:description">
                Description
              </h3>
              <div class="searchable">
                <p>
It seems to me that shortest_path() does not find the shortest path in the case where redundant edges having the same source and target nodes are involved. To illustrate the problem I created a table of only two parallel edges:
</p>
<pre class="wiki">gisdata=# select * from edges;  
 id | source | target | length
----+--------+--------+--------
  1 |      1 |      2 |    5.5
  2 |      1 |      2 |    4.4
(2 rows)
</pre><p>
When travelling from node 1 to node 2 shortest_path() should select edge 2 because of the lower cost. It selects edge 1 instead, probably since edge 1 is returned by Postgresql first:
 
</p>
<pre class="wiki">gisdata=# select * from shortest_path('SELECT id, source, target, length AS cost FROM edges', 1, 2, false, false);
 vertex_id | edge_id | cost
-----------+---------+------
         1 |       1 |  5.5
         2 |      -1 |    0
(2 rows)
</pre><p>
This seems wrong to me or do I miss something?
</p>
<p>
Thank you,
Erik
</p>

              </div>
            </div>
        </div>
          <h2>Change History</h2>
          <div id="changelog">
            <form method="get" action="#comment" class="printableform">
              <div class="change">
                <h3 class="change" id="comment:1">
                  Changed <a class="timeline" href="http://pgrouting.postlbs.org/timeline?from=2008-05-09T11%3A00%3A02%2B0900&amp;precision=second" title="2008-05-09T11:00:02+0900 in Timeline">3 years</a> ago by anton
                </h3>
      <ul class="changes">
        <li>
          <strong>status</strong>
              changed from <em>new</em> to <em>closed</em>
        </li><li>
          <strong>resolution</strong>
              set to <em>invalid</em>
        </li>
      </ul>
      <div class="comment searchable">
        <p>
Hi Erik,
</p>
<p>
There is no bug here. You know, Dijkstra and A* are vertex based algorithms. It means that they know nothing about edges and they only care about cost of going from a to b. In case of parallel edges (your case for example) when the algorithms reaches vertex 1 it searches for adjacent vertexes and it finds only one vertex 2. It doesn't care about which way is better and takes the first way (edge) it can find. Sometimes it is the shorter edge and sometimes not.
</p>
<p>
There are two ways to resolve this - to split parallel edges or to use Shooting* algorithm (which is edge based and cares about edges).
</p>
<p>
See also <a class="closed ticket" href="15.html" title="bug report: No shortest path of edges with same source and target node (closed: fixed)">#15</a>
</p>

      </div>
              </div>
            </form>
          </div>
      <div id="help">
        <strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.
      </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://pgrouting.postlbs.org/ticket/110?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="http://pgrouting.postlbs.org/ticket/110?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="http://pgrouting.postlbs.org/ticket/110?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about.html"><strong>Trac 0.11.5rc1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">pgRouting is a project of PostLBS <br /><a href="http://www.postlbs.org/">http://www.postlbs.org/</a></p>
    </div>
  
<!-- Google Analytics Widget Code -->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    jQuery(document).ready( function() {
      var pageTracker = _gat._getTracker("UA-9766327-1");
      jQuery('a').each( function() {
        var url;
        if ( this.href.match("110.html\/\/pgrouting.postlbs.org") ) {
          if ( this.href.match(/\.(zip|tar|tar.gz|tar.bzip|egg)$/) ) {
            url = this.pathname + this.search;
          };
        } else {
          var port = '';
          if ( this.port != '') port = ':'+this.port;
          url = '/external/' + this.hostname + port + this.pathname + this.search;
        };
        if ( url ) {
          if ( ! url.match('%5e.html\/attachment\/') ) {
            jQuery(this).click( function() {
              pageTracker._trackPageview(url);
            });
          };
        };
      });
    pageTracker._trackPageview();
    });
  } catch(err) {}
</script>
<!-- Google Analytics Widget Code Ended -->
</body>

<!-- Mirrored from pgrouting.postlbs.org/ticket/110 by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 20 Nov 2010 02:17:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>